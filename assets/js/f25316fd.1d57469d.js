"use strict";(self.webpackChunklinkis_web_apache=self.webpackChunklinkis_web_apache||[]).push([[8701],{3905:function(e,t,n){n.d(t,{Zo:function(){return d},kt:function(){return h}});var o=n(67294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},d=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,d=a(e,["components","mdxType","originalType","parentName"]),u=c(n),h=r,m=u["".concat(l,".").concat(h)]||u[h]||p[h]||i;return n?o.createElement(m,s(s({ref:t},d),{},{components:n})):o.createElement(m,s({ref:t},d))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,s=new Array(i);s[0]=u;var a={};for(var l in t)hasOwnProperty.call(t,l)&&(a[l]=t[l]);a.originalType=e,a.mdxType="string"==typeof e?e:r,s[1]=a;for(var c=2;c<i;c++)s[c]=n[c];return o.createElement.apply(null,s)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},92983:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return a},contentTitle:function(){return l},metadata:function(){return c},toc:function(){return d},default:function(){return u}});var o=n(87462),r=n(63366),i=(n(67294),n(3905)),s=["components"],a={title:"linkis+scriptis Installation and erection",sidebar_position:10},l=void 0,c={unversionedId:"deployment/linkis_scriptis_install",id:"deployment/linkis_scriptis_install",isDocsHomePage:!1,title:"linkis+scriptis Installation and erection",description:"1.introduce",source:"@site/docs/deployment/linkis_scriptis_install.md",sourceDirName:"deployment",slug:"/deployment/linkis_scriptis_install",permalink:"/docs/1.1.2/deployment/linkis_scriptis_install",editUrl:"https://github.com/apache/incubator-linkis-website/edit/dev/docs/deployment/linkis_scriptis_install.md",tags:[],version:"current",sidebarPosition:10,frontMatter:{title:"linkis+scriptis Installation and erection",sidebar_position:10},sidebar:"tutorialSidebar",previous:{title:"Deploy Linkis without HDFS",permalink:"/docs/1.1.2/deployment/deploy_linkis_without_hdfs"},next:{title:"Overview",permalink:"/docs/1.1.2/user_guide/overview"}},d=[{value:"1.introduce",id:"1introduce",children:[{value:"On linkis1.0 and DSS 1.1 After X, scriptpis can be deployed separately to integrate linkis. Using the interactive analysis function of scriptis, you can write SQL, pyspark, hiveql and other scripts online on the web page and submit them to the linkis executor. It also supports UDF, functions, resource control, user-defined variables and other features. This article will introduce the whole process from the compilation of scriptis source code to the deployment of integrated linkis",id:"on-linkis10-and-dss-11-after-x-scriptpis-can-be-deployed-separately-to-integrate-linkis-using-the-interactive-analysis-function-of-scriptis-you-can-write-sql-pyspark-hiveql-and-other-scripts-online-on-the-web-page-and-submit-them-to-the-linkis-executor-it-also-supports-udf-functions-resource-control-user-defined-variables-and-other-features-this-article-will-introduce-the-whole-process-from-the-compilation-of-scriptis-source-code-to-the-deployment-of-integrated-linkis",children:[]}]},{value:"2.Local start process",id:"2local-start-process",children:[{value:"2.1 Install node js",id:"21-install-node-js",children:[]},{value:"2.2 Local installation project",id:"22-local-installation-project",children:[]},{value:"2.3 to configure",id:"23-to-configure",children:[]},{value:"2.4 Local operation project",id:"24-local-operation-project",children:[]},{value:"3.scriptis separate installation steps",id:"3scriptis-separate-installation-steps",children:[]},{value:"3.1 scriptis pack",id:"31-scriptis-pack",children:[]},{value:"3.2 Manual deployment",id:"32-manual-deployment",children:[]}]},{value:"4.scriptis Use steps:",id:"4scriptis-use-steps",children:[{value:"4.1 Log in to the linkis management console normally",id:"41-log-in-to-the-linkis-management-console-normally",children:[]},{value:"4.2 Visit the scripts page after successful login",id:"42-visit-the-scripts-page-after-successful-login",children:[]}]}],p={toc:d};function u(e){var t=e.components,a=(0,r.Z)(e,s);return(0,i.kt)("wrapper",(0,o.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h2",{id:"1introduce"},"1.introduce"),(0,i.kt)("hr",null),(0,i.kt)("h3",{id:"on-linkis10-and-dss-11-after-x-scriptpis-can-be-deployed-separately-to-integrate-linkis-using-the-interactive-analysis-function-of-scriptis-you-can-write-sql-pyspark-hiveql-and-other-scripts-online-on-the-web-page-and-submit-them-to-the-linkis-executor-it-also-supports-udf-functions-resource-control-user-defined-variables-and-other-features-this-article-will-introduce-the-whole-process-from-the-compilation-of-scriptis-source-code-to-the-deployment-of-integrated-linkis"},"On linkis1.0 and DSS 1.1 After X, scriptpis can be deployed separately to integrate linkis. Using the interactive analysis function of scriptis, you can write SQL, pyspark, hiveql and other scripts online on the web page and submit them to the linkis executor. It also supports UDF, functions, resource control, user-defined variables and other features. This article will introduce the whole process from the compilation of scriptis source code to the deployment of integrated linkis"),(0,i.kt)("h2",{id:"2local-start-process"},"2.Local start process"),(0,i.kt)("h3",{id:"21-install-node-js"},"2.1 Install node js"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"     Set node JS can be downloaded to the local computer and installed. Download address: http://nodejs.cn/download/ (it is recommended to use the latest stable version) this step is only required for the first use\n")),(0,i.kt)("h3",{id:"22-local-installation-project"},"2.2 Local installation project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"    2.2.1 Open the terminal command line in the download path and execute the following commands:\n         git clone https://github.com/WeDataSphere/DataSphereStudio/tree/dev-1.1.x(It is recommended to use this branch before dss1.1.0 release)\n    Note: in order to ensure the readability of the source code, the coding specifications of some open source projects require that the naming of classes, methods and variables should be literal and avoid abbreviations. Therefore, some source code files may be named longer. Because the Windows version of Git is compiled with msys, it uses the old version of Windows API, and the file name is limited to 260 characters.\n    The solution is as follows:\n        Open cmd Exe (you need to add git to the environment variable) and execute the following command:\n        git config --global core.longpaths true\n\n    2.2.2 cd DataSphereStudio/web (Enter web directory)\n\n    lerna bootstrap \uff08Add dependency\uff09 Note: learn should be installed in lerna bootstrap instead of NPM install \n    Note: it is recommended to download linkis > 1.0.3 DSS > 1.1 X (version configuration download)\n    Reason: because DSS has not yet released its version, it is recommended to use the branch of this interval before the release of dss1.1.0\n\n")),(0,i.kt)("h4",{id:"instruction-introduction"},"Instruction introduction\uff1a"),(0,i.kt)("p",null,"Pull project package from remote warehouse to local computer\uff1agit clone Warehouse address\nEnter the project package root directory\uff1acd DataSphereStudio/web\nDependencies required for installation project\uff1alerna bootstrap \uff08This step is only required for the first use\uff09"),(0,i.kt)("h3",{id:"23-to-configure"},"2.3 to configure"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"If you start the service locally, you need to make some configuration in the code, such as in the root directory env. Development file:\n// Back end interface address\nVUE_APP_MN_CONFIG_PREFIX=http://yourIp:yourPort/yourPath \uff08gatway server\uff09\n")),(0,i.kt)("h5",{id:"note-only-the-local-startup-needs-to-be-configured-the-startup-on-the-server-does-not-need-to-be-added-such-as-vue-app-mn-config-prefix-is-empty-by-default"},"Note: only the local startup needs to be configured. The startup on the server does not need to be added, such as Vue",(0,i.kt)("em",{parentName:"h5"}," APP")," MN",(0,i.kt)("em",{parentName:"h5"}," CONFIG")," Prefix is empty by default."),(0,i.kt)("h3",{id:"24-local-operation-project"},"2.4 Local operation project"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"If you want to run the project on the local browser and change the code to view the effect, you need to open the terminal command window under the project path and execute the following commands in the command:\n# Develop and start DSS\nnpm run serve\n# Run some module sub applications, and support combination through modules. For example, scripts version:\nnpm run serve --module=scriptis\n")),(0,i.kt)("h4",{id:"25-package-project-for-online-server"},"2.5 Package project (for online server)"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"}," You can open the terminal command window under the project path to package the project in the command and generate compiled code\n  \n  2.5.1 Package DSS application\n    npm run build\n  2.5.2 The Baoding sub application supports combination through module\n    npm run build --module=scriptis\n    npm run build --module=apiServices,workspace --micro_module=apiServices\n")),(0,i.kt)("p",null,'After the command is successfully executed, a folder named "dist" will appear under the project root directory, which is the packaged code. You can put this folder directly into your static server.\nAccess the app through a link in the browser (Chrome browser is recommended): http://localhost:port/  .  When you use this method to run a project, the effect of your code changes will be dynamically reflected in the browser.'),(0,i.kt)("h5",{id:"note-because-the-project-adopts-front-end-and-back-end-separate-development-when-running-on-the-local-browser-you-need-to-set-the-browser-to-access-the-back-end-interface-across-domains"},"Note: because the project adopts front-end and back-end separate development, when running on the local browser, you need to set the browser to access the back-end interface across domains"),(0,i.kt)("h5",{id:"for-example-chrome-browser-the-configuration-mode-under-windows-system"},"For example, Chrome browser: the configuration mode under Windows system:"),(0,i.kt)("p",null,"Close all chrome browsers."),(0,i.kt)("p",null,"Create a new chrome shortcut, right-click properties, select target in the Shortcut tab, and add --args --disable web security --user data dir=c:\\mychromedevuserdata"),(0,i.kt)("p",null,'Open the configuration method under the Chrome browser MAC system through a shortcut: execute the following command on the terminal command line (you need to replace the yourname in the path. If it does not take effect, please check the location of the mychromedevuserdata folder on your machine and copy the path to the "--user-data-dir=" of the following command)'),(0,i.kt)("p",null,"open -n /Applications/Google\\ Chrome.app/ --args --disable-web-security --user-data-dir=/Users/yourname/MyChromeDevUserData/"),(0,i.kt)("h3",{id:"3scriptis-separate-installation-steps"},"3.scriptis separate installation steps"),(0,i.kt)("h3",{id:"31-scriptis-pack"},"3.1 scriptis pack"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"    npm run serve --module=scriptis #Specify module\n")),(0,i.kt)("h3",{id:"32-manual-deployment"},"3.2 Manual deployment"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"}," location /scriptistest { \n             alias      /data/Install/scriptisInstall/dist/dist/ ;\n             index     index.html ;\n            }\nserver {\n            listen       port;# Access port\n            server_name  localhost;\n            #charset koi8-r;\n            #access_log  /var/log/nginx/host.access.log  main;\n            location /linkis/visualis {\n            root   /data/Install/LinkisWeb/linkis/visualis; # Static file directory\n            autoindex on;\n            }\n            location / {\n             root    /appcom/Install/linkis-web/dist/; # Static file directory\n             index   index.html;\n            }\n            location /scriptistest {\n             alias      /data/Install/scriptisInstall/dist/dist/ ;  #nginx scriptis Static file storage path (customizable)\n             index     index.html ;\n            }~~~~\n            location /ws {\n            proxy_pass http://yourIP:port;#Address of gatway\n            proxy_http_version 1.1;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection upgrade;\n            }\n location /api {\n            proxy_pass http://yourIP:port; #Address of gatway\n            proxy_set_header Host $host;\n            proxy_set_header X-Real-IP $remote_addr;\n            proxy_set_header x_real_ipP $remote_addr;\n            proxy_set_header remote_addr $remote_addr;\n            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n            proxy_http_version 1.1;\n            proxy_connect_timeout 4s;\n            proxy_read_timeout 600s;\n            proxy_send_timeout 12s;\n            proxy_set_header Upgrade $http_upgrade;\n            proxy_set_header Connection upgrade;\n            }\n\n            #error_page  404              /404.html;\n            # redirect server error pages to the static page /50x.html\n            #\n            error_page   500 502 503 504  /50x.html;\n            location = /50x.html {\n            root   /usr/share/nginx/html;\n            }\n        }\n")),(0,i.kt)("h5",{id:"note-the-difference-between-root-and-alias"},"Note: the difference between root and alias:"),(0,i.kt)("p",null,"The result of root processing is: root path + location path"),(0,i.kt)("p",null,"The result of alias processing is to replace the location path with the alias path"),(0,i.kt)("h2",{id:"4scriptis-use-steps"},"4.scriptis Use steps:"),(0,i.kt)("h3",{id:"41-log-in-to-the-linkis-management-console-normally"},"4.1 Log in to the linkis management console normally"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"http://yourIP:port/#/\n")),(0,i.kt)("p",null,"Because scripts requires login verification, you need to log in first."),(0,i.kt)("h3",{id:"42-visit-the-scripts-page-after-successful-login"},"4.2 Visit the scripts page after successful login"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-bash"},"http://yourIP:port/scriptistest/#/home\n")),(0,i.kt)("p",null,"Yourip: Server IP, port: Port number, scriptest is the static file prefix of the requested scripts project (customizable)"),(0,i.kt)("h4",{id:"design-sketch"},"design sketch"),(0,i.kt)("p",null,(0,i.kt)("img",{alt:"design sketch",src:n(97384).Z})))}u.isMDXComponent=!0},97384:function(e,t,n){t.Z=n.p+"assets/images/linkis-scriptis-61380d880b79c9dc16e994756d0f1427.png"}}]);